<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta property="og:site_name" content="sookim-1"/><link rel="canonical" href="https://sookim-1.github.io/posts/005-20240304"/><meta name="twitter:url" content="https://sookim-1.github.io/posts/005-20240304"/><meta property="og:url" content="https://sookim-1.github.io/posts/005-20240304"/><title>번호 : 005, 작성일자: 2024-03-04 | sookim-1</title><meta name="twitter:title" content="번호 : 005, 작성일자: 2024-03-04 | sookim-1"/><meta property="og:title" content="번호 : 005, 작성일자: 2024-03-04 | sookim-1"/><meta name="description" content="Custom Push, APNs Payload 형식, 앱스토어 Reject, 빌드 시간 단축, Appstore Connect, Sentry fastlane plugin"/><meta name="twitter:description" content="Custom Push, APNs Payload 형식, 앱스토어 Reject, 빌드 시간 단축, Appstore Connect, Sentry fastlane plugin"/><meta property="og:description" content="Custom Push, APNs Payload 형식, 앱스토어 Reject, 빌드 시간 단축, Appstore Connect, Sentry fastlane plugin"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.svg" type="image/svg+xml"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to sookim-1"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">sookim-1</a></div></header><div class="wrapper"><article><div class="content"><h1>번호 : 005, 작성일자: 2024-03-04</h1><h2>2024.02.27 ~ 2024.03.03</h2><h3>🔥 Push 신규 케이스 추가 및 Custom Push</h3><hr><p>iOS에서는 실시간통신을 위하여 Socket을 사용할 수 있다. 하지만 앱이 백그라운드로 이동한 경우 Socket 연결을 해제한다.(socket-io 공식문서) 이런 경우, Push에서 데이터를 추가하여 백그라운드에서 데이터를 전달받을 수 있다.</p><p>안드로이드와 달리 iOS에서는 APNs로 Payload형식을 맞추어 값을 지정하여 Push를 전송해야 APNs에서 기기로 전달을 하는데 형식을 맞추어서 전달해야 한다. AppDelegate에서 Background에서 Push처리와 Foreground에서 Push처리를 각각 상황별로 처리할 수 있다.</p><p>Custom Push를 구현하기 위해서 Push에 Attachment를 이용하여 이미지를 전달받는 방법과 값을 변경하는 방법등 <a href="https://ios-development.tistory.com/1280">김종권iOS블로그 - Push 섹션</a>를 참고하여 테스트를 해보았다. 구현도중 Notification Service Extension을 진행하면서 발생한 이슈가 한가지 있었는데 <strong>Command ValidateEmbeddedBinary failed with a nonzero exit code</strong> 해당 에러는 Notification Service Extension 타겟의 Bundle Version들이 Host 타겟과 다르기 때문에 발생한 이슈여서 버전을 맞춰주면 해결했다.</p><h3>🛫 앱스토어 Reject</h3><hr><p>Reject 사유는 <strong>Guideline 2.1 - Performance - App Completeness</strong> 심사자의 아이패드 에어에서 흰 화면에서 진행이 안되는 이슈였다. fastlane을 이용하여 Testflight배포를 하는데 Archive를 진행하는 도중 일부 오류가 발생한 것 같다. fastlane을 업데이트 한 후 다시 배포를 한 후 심사자와 동일한 환경으로 실행해본 후 확인한 후 해결되었다. 과거에 관련한 이슈가 있었는데 fastlane을 이용해 서로 다른 컴퓨터에서 배포하였을 때 어떤 버전에서는 특정 iOS버전이 빌드가 잘 되었고, 다른 컴퓨터에서 배포한 버전에서는 특정 iOS버전이 충돌이 나는 이슈가 있었다.</p><h3>🙋🏻‍♂️ 기타 사항</h3><hr><ol><li>FireStore를 CocoaPod으로 설치하면 기하급수적으로 프로젝트 빌드시간이 증가된다.(약 2배) 빌드시간을 계산하기 위해서는 Xcode 빌드시간을 계산하는 옵션을 활성화하고 무거운작업을 할 것 같은 코드블록에 경고표시를 하여 원인을 확인할 수 있다.</li><li>AppStore Connect에서 프로파일, 인증서, 기기등을 정리했다.</li><li>fastlane을 이용하여 sentry를 upload할 때 plugin을 변경하면 소스코드를 더 자세히 표시할 거로 예상했는데 예상과 다르게 동일하여서 더 자세히 알아봐야겠다.</li></ol></div><span>태그: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/sentry">Sentry</a></li><li><a href="/tags/fastlane">Fastlane</a></li><li><a href="/tags/appstore-reject">Appstore Reject</a></li><li><a href="/tags/push">Push</a></li><li><a href="/tags/apns">APNs</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="mailto:scstnghks@gmail.com">Gmail</a> | <a href="https://www.linkedin.com/in/soohwan-kim-80250623a/">LinkedIn</a> | <a href="https://github.com/sookim-1">GitHub</a> | <a href="/feed.rss">RSS</a></p></footer></body></html>