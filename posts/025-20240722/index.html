<!doctype html><html lang="en" data-bs-theme="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="서버에서 응답받은 JSON의 Codable 모델을 작성했을 때, 키값의 자료형이 다르거나, 없는 키값이 있는 경우 앱이 종료되지 않도록 사전에 설정한 기본값으로 변경해주기 위해 KeyedDecodingContainer의 extension하여 사용할 수 있다."><meta name="author" content="sookim-1"><meta name="generator" content="Ignite v0.1.0"><title>번호 : 025, 작성일자: 2024-07-22 – My Awesome Site</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/bootstrap-icons.min.css" rel="stylesheet"><link href="https://www.example.com/posts/025-20240722" rel="canonical"><meta property="og:site_name" content="sookim-1"><meta property="og:title" content="번호 : 025, 작성일자: 2024-07-22"><meta property="twitter:title" content="번호 : 025, 작성일자: 2024-07-22"><meta property="og:description" content="번호 : 025, 작성일자: 2024-07-22"><meta name="twitter:description" content="번호 : 025, 작성일자: 2024-07-22"><meta property="og:url" content="https://www.example.com/posts/025-20240722"><meta name="twitter:domain" content="example.com"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:dnt" content="on"></head><body class="container"style="padding-top: 80px; padding-bottom: 80px"><div class="col-sm-10 mx-auto"><header><nav class="fixed-top navbar navbar-expand-md"style="background-color: rgb(70 130 180 / 100%)" data-bs-theme="dark"><div class="container-fluid col"><a href="/" class="navbar-brand">수킴의 개인 T.W.L</a><button type="button" class="navbar-toggler btn" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div id="navbarCollapse" class="collapse navbar-collapse"><ul class="navbar-nav mb-2 mb-md-0 col justify-content-end"></ul></div></div></nav></header><h1>번호 : 025, 작성일자: 2024-07-22</h1><p><h2>2024.07.15 ~ 2024.07.21</h2><h3>🌏 JSON 다루기</h3><hr /><p>서버에서 응답받은 JSON의 Codable 모델을 작성했을 때, 키값의 자료형이 다르거나, 없는 키값이 있는 경우 앱이 종료되지 않도록 사전에 설정한 기본값으로 변경해주기 위해 KeyedDecodingContainer의 extension하여 사용할 수 있다.</p><p>하지만, 특정 요청에서는 null과 기본값을 구분해주고 싶은 경우에도 기본값으로 변경해주기 때문에 Decoder 객체에 구분할 수 있는 프로퍼티를 추가해주고 해당 프로퍼티값을 바라보면서 상황에 따라 구분할 수 있도록 코드를 수정했다.</p><p>해당 코드를 수정할 때 Mock API를 만들기 위해 🔗 <a href="https://insomnia.rest/"><strong>Insomnia</strong></a>툴을 사용했는데 매우 간편해서 자주 사용할 것 같다.</p><p>자주 사용할 수도 있다고 생각하여  🔗 <a href="https://gist.github.com/sookim-1/24118584ae49a5c1f5d11e03a4c50de9"><strong>KeyedDecodingContainer+Extension.swift</strong></a> 관련 코드를 gist에 추가했다.</p><h3>⚙️ private cocoapod 배포</h3><hr /><p>SwiftUI프로젝트를 진행할 때 DesignSystem을 작성하여 사용하면 편리할 것 같아서 SwiftUI DesignSystem 저장소를 생성했다.</p><p>아직은 개인용도로 사용예정이여서 오픈소스로 배포하지 않고 private pod으로 배포하기 위해서 podspec을 수정하고 배포했다.</p><p>private pod으로 배포하기 위해서는 Library Repository와 Spec Repository를 2개를 생성해서 코드는 Library Repository에 작성하고 Spec Repository로 접근해서 Pod을 추가하는 원리였다.</p><p>공개저장소로 배포는 비공개저장소보다 더 간단했다. cocoaPod에 계정을 등록하고 podspec을 배포만하면 되었다.</p><p>적용은 잘되었지만, 아직 Resource파일의 번들을 찾지 못하는 문제들이 있지만, 보완해가면서 CocoaPod외에 SPM도 지원하도록 수정해가야겠다.</p><h3>🙋🏻‍♂️ 기타 사항</h3><hr /><ol><li>탭바 아이템 여러개를 동시에 터치했을 때 UITabBarControllerDelegate의 animation 처리하는 메서드에서 이슈가 발생했는데 기본적으로 탭바를 구현할 때 멀티터치를 제한하도록 해야겠다.</li><li>WebView 관련 코드리뷰 중 🔗 <a href="https://developer.apple.com/documentation/webkit/wkwebview/1414950-customuseragent"><strong>customAgent</strong></a>와 🔗 <a href="https://developer.apple.com/documentation/webkit/wkwebviewconfiguration/1395665-applicationnameforuseragent"><strong>applicationNameForUserAgent</strong></a> 2가지를 설정하는 부분이 있어서 2개의 차이에 대해서 알아보았다. userAgent를 customAgent는 통째로 변경하고 applicationNameForUserAgent는 userAgent 끝에 추가하는 방식이였다. 하지만 applicationNameForUserAgent는 웹사이트에 따라서 값이 제대로 설정되지 않을 수 있어서 customAgent로 설정하는 방법이 안전한 방법 같다.</li></ol></p><div><h3><a href="/tags/i-o-s" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">iOS</span></a><a href="/tags/swift" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">Swift</span></a><a href="/tags/j-s-o-n" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">JSON</span></a><a href="/tags/cocoa-pods" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">Cocoa Pods</span></a><a href="/tags/web-view" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">WebView</span></a><a href="/tags/tab-bar" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">TabBar</span></a><a href="/tags/r-e-s-t-a-p-i" rel="tag"><span class="badge text-bg-primary rounded-pill"style="margin-right: 5px">REST API</span></a></h3></div><div><h2 class="text-center mt-5"><a href="https://github.com/sookim-1" target="_blank" rel="noopener noreferrer" class="link-secondary"style="margin-right: 20px"><i class="bi-github"></i></a><a href="https://www.linkedin.com/in/sookim1" target="_blank" rel="noopener noreferrer" class="link-secondary"style="margin-right: 20px"><i class="bi-linkedin"></i></a></h2><p class="text-center mt-5">Created with <a href="https://github.com/twostraws/Ignite">Ignite</a></p></div></div><script src="/js/bootstrap.bundle.min.js"></script></body></html>