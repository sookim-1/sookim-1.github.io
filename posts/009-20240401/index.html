<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta property="og:site_name" content="sookim-1"/><link rel="canonical" href="https://sookim-1.github.io/posts/009-20240401"/><meta name="twitter:url" content="https://sookim-1.github.io/posts/009-20240401"/><meta property="og:url" content="https://sookim-1.github.io/posts/009-20240401"/><title>번호 : 009, 작성일자: 2024-04-01 | sookim-1</title><meta name="twitter:title" content="번호 : 009, 작성일자: 2024-04-01 | sookim-1"/><meta property="og:title" content="번호 : 009, 작성일자: 2024-04-01 | sookim-1"/><meta name="description" content="Notification Service Extension, App Switcher상태일 때 앱 화면 변경, VerticalCardSwiper 라이브러리, Notion 정리, Preview 기능 활용, systemLayoutSizeFitting메서드"/><meta name="twitter:description" content="Notification Service Extension, App Switcher상태일 때 앱 화면 변경, VerticalCardSwiper 라이브러리, Notion 정리, Preview 기능 활용, systemLayoutSizeFitting메서드"/><meta property="og:description" content="Notification Service Extension, App Switcher상태일 때 앱 화면 변경, VerticalCardSwiper 라이브러리, Notion 정리, Preview 기능 활용, systemLayoutSizeFitting메서드"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.svg" type="image/svg+xml"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to sookim-1"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">sookim-1</a></div></header><div class="wrapper"><article><div class="content"><h1>번호 : 009, 작성일자: 2024-04-01</h1><h2>2024.03.25 ~ 2024.03.31</h2><h3>📱 Xcode Preview 기능</h3><p>Xcode에서 Preview기능을 활용하면 실제 기기 및 시뮬레이터를 사용하지 않고 최신 상태의 뷰 콘텐츠를 표시할 수 있어서 코드로 화면개발을 할 때 편리하다.</p><p>하지만, 실제 프로젝트에서 여러개의 라이브러리를 추가하고 빌드시간이 오래걸리는 프로젝트인 경우 오히려 실제기기를 빌드하는 게 더 빠른 경우도 있었기 때문에 해당 기능은 주로 빌드시간이 짧은 프로젝트의 경우 편리하다고 생각했다.</p><p>해당 기능은 주로 SwiftUI에서 자주 사용하고 UIKit에서 사용하는 방법이 존재하지만, 프로토콜을 채택해서 구현해서 추가해야되기 때문에 새로운 프로젝트를 생성할 때마다 코드를 추가해야하는 번거로움이 있었다.</p><p>iOS17이상부터 Swift Macro기능을 활용해서 굉장히 간단하게 UIKit에서도 사용할 수 있어서 <a href="https://sookim-1.tistory.com/3">블로그</a>에 정리를 해보았고 이제 해당 기능을 간단한 프로젝트에서부터 자주 사용해볼 예정이다.</p><hr><h3>😅 systemLayoutSizeFitting</h3><p>어느 화면이 UITableView로 구현한 화면이 있었는데 Footer부분의 버튼 및 뷰가 사용자의 상태별로 숨김처리 및 표시가 되어야하는 경우가 있어서 UITableView Footer의 높이가 유동적으로 변해야했다.</p><p>따라서 <a href="https://developer.apple.com/documentation/uikit/uiview/1622623-systemlayoutsizefitting">systemLayoutSizeFitting(_:withHorizontalFittingPriority:verticalFittingPriority:)</a>를 사용하여 최적크기를 반환하는 메서드를 사용하여 높이를 구하였는데 컨텐츠영역이 짤리는 이슈가 발생했다.</p><p>이유는 targetSize만 지정된 경우에도 최적크기를 구할 수는 있지만, 좀 더 targetSize에 정확한 크기를 얻기 위해 수직제약조건의 파라미터의 값을 설정함으로써 정확한 크기를 반환했다.</p><hr><h3>🔔 Notification Sevice Extension</h3><p>기본적으로 iOS에서는 Remote Notification을 표시하기 위해서는 APNs를 거쳐서 Push를 전달받을 수 있다.</p><p>따라서 APNs에 전송할 때 payload에 필요한 설정 및 정보들을 전달하게 된다.</p><p>알림 종류별로 그룹화하고 새 알림이 온다면 이전 알림들을 제거하는 기능을 도입하고 싶어서 Extension을 활용하면 적용할 수 있는지 확인해보았지만, 서버에서 데이터를 전달할 때 payload설정을 통해서만 가능한 작업이였다.</p><p>해당 내용을 알게되면서 <a href="https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension">Service Extension</a>으로 활용할 수 있는 작업에 대해서 알아보았다.</p><ul><li>원격알림의 내용을 수정할 수 있는 경우<ul><li>암호화된 형식으로 전송된 데이터의 암호를 해독합니다.</li><li>크기가 최대 페이로드 크기를 초과하는 이미지 또는 기타 미디어 첨부 파일을 다운로드합니다.</li><li>사용자 기기의 데이터를 통합하여 알림의 내용을 업데이트합니다.</li></ul></li></ul><p>요약하자면 alert에 전달된 내용을 변경하는 기능을 담당한다. (텍스트 변경 및 이미지 추가)</p><hr><h3>🙋🏻‍♂️ 기타 사항</h3><ol><li>블로그에 올리는 글을 제외한 모든 글들을 개인 Notion에 정리 중인데 Notion계정이 학생인증으로 인해 네이버이메일로 되어있어서 이제 더 이상 사용할 이유가 없어져서 지메일로 옮기기 위해 모든 페이지를 옮기는 작업을 진행했다. 또한, 페이지들을 관리하기 편하기위해 Notion의 데이터베이스기능을 활용하여 나만의 템플릿을 지정하여 정리하였다.</li><li>현대카드 iOS앱을 보았는데 카드형식으로 넘기는 UI가 있어서 구현하는 방법을 살펴보았다. 관련된 라이브러리 중 <a href="https://github.com/JoniVR/VerticalCardSwiper">VerticalCardSwiper</a>라는 라이브러리가 있었다. 해당 라이브러리의 코드를 보고 어떻게 구현했는지 살펴보았다.</li><li>금융 및 카드앱에서 백그라운드로 가는 경우 앱의 화면이 가려지는 경우가 있어서 어떻게 구현했는 지 보았는데 App Switcher 상태라고 하는 상태가 있어서 아이폰에서 앱을 들어올린 경우에 대해서 정의한 상태였다.</li></ol></div><span>태그: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/notification-service-extension">Notification Service Extension</a></li><li><a href="/tags/remote-notificaiton">Remote Notificaiton</a></li><li><a href="/tags/app-switcher">App Switcher</a></li><li><a href="/tags/systemlayoutsizefitting">systemLayoutSizeFitting</a></li><li><a href="/tags/verticalcardswiper">VerticalCardSwiper</a></li><li><a href="/tags/notion">Notion</a></li><li><a href="/tags/preview">Preview</a></li><li><a href="/tags/xcode-preview">Xcode Preview</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="mailto:scstnghks@gmail.com">Gmail</a> | <a href="https://www.linkedin.com/in/soohwan-kim-80250623a/">LinkedIn</a> | <a href="https://github.com/sookim-1">GitHub</a> | <a href="/feed.rss">RSS</a></p></footer></body></html>