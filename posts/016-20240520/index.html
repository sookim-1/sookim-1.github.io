<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta property="og:site_name" content="sookim-1"/><link rel="canonical" href="https://sookim-1.github.io/posts/016-20240520"/><meta name="twitter:url" content="https://sookim-1.github.io/posts/016-20240520"/><meta property="og:url" content="https://sookim-1.github.io/posts/016-20240520"/><title>번호 : 016, 작성일자: 2024-05-20 | sookim-1</title><meta name="twitter:title" content="번호 : 016, 작성일자: 2024-05-20 | sookim-1"/><meta property="og:title" content="번호 : 016, 작성일자: 2024-05-20 | sookim-1"/><meta name="description" content="Socket Cluster, Clean Architecture 패턴, Tuist 적용"/><meta name="twitter:description" content="Socket Cluster, Clean Architecture 패턴, Tuist 적용"/><meta property="og:description" content="Socket Cluster, Clean Architecture 패턴, Tuist 적용"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.svg" type="image/svg+xml"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to sookim-1"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">sookim-1</a></div></header><div class="wrapper"><article><div class="content"><h1>번호 : 016, 작성일자: 2024-05-20</h1><h2>2024.05.13 ~ 2024.05.19</h2><h3>🚨 Socket Cluster</h3><hr><p>Socket Cluster란 Socket 통신을 지원해주는 iOS 라이브러리다. 해당 라이브러리는 PubSub기능을 지원한다. iOS앱에서는 백그라운드로 이동하는 경우 Socket연결을 보장하지 않기 때문에 해제하는 것을 권장한다. 그러므로, 다시 Active상태가 되었을 때 Socket연결을 시도한다. 이런 운영체제의 환경으로 인하여, 재연결을 시도할 때 수신하지 못한 메시지가 전달되지 않거나 앱의 특정상태에서는 백그라운드에서도 Socket연결을 해제하지 않아야하는데 해제되는 경우를 대비해야 한다.</p><ol><li>SocketCluster에서 지원하는 setBackgroundQueue메서드를 이용하여 메인스레드에 영향을 주지않도록 변경했다.</li><li>재연결시도하는 Timer를 시작할때 재연결이 완료되기 전까지의 시간에 대응하기 위해 다른 HTTP를 호출하여 대응했다. 또한, Timer는 백그라운드스레드에서 동작하지만 특정시간에 호출되는 코드는 메인스레드에서 동작하도록 했다.</li><li>채널 구독을 한 후 해제를 적절히 하지 않으면 메모리누수가 발생할 수 있어서 채널의 구독시점과 구독해제시점을 명확하게 지정하여 처리했다.</li></ol><h3>⚙️ Tuist</h3><hr><p>Tuist는 프로젝트 구조에 대한 복잡성을 제거하여 Xcode프로젝트를 쉽게 처리할 수 있도록 하는 것을 목표로 하는 도구입니다.</p><p>iOS 개발자가 소수인 경우나, Objective-C라이브러리 중 SPM을 지원하지도 않는 라이브러리가 있는 경우 등인 경우 gitattribute기능을 활용하여 Xcode프로젝트파일 충돌에 대한 대응을 진행할 수 있다.</p><p>하지만 버전이 발전함에 따라 Tuist에서도 Objective-C SPM을 지원하지 않는 라이브러리에 대한 대응하는 방법들이 존재해서 검토를 해보았다.</p><p>지난 주는 기존의 토이프로젝트를 Tuist로 변경하는 작업을 진행해보았다. 3버전과 4버전의 코드와 tuist 명령어가 매우 달라서 처음 버전 설정을 명확히 지정해야겠다.</p><h3>🧹 Clean Architecture</h3><hr><p>토이프로젝트에서 아키텍처패턴을 적용하기 위해서 Clean Architecture에 대한 내용을 공부했다.</p><p>Clean Code 문서를 먼저 읽어보고 iOS에서 Clean Architecture를 적용한 프로젝트를 분석했다.</p><p>Clean Architecture는 역할에 따라 레이어를 분리하고 각 레이어는 종속성패턴을 지켜 영향도를 제거하도록 해주는 아키텍처패턴이다.</p><p>여러 장점들에 대해서 생각해보았고 <a href="https://sookim-1.tistory.com/entry/Clean-Architecture-for-iOS">티스토리블로그에 관련 글</a>을 작성했다.</p><h3>🙋🏻‍♂️ 기타 사항</h3><hr><ol><li>그동안 작성한 이력서를 검토해보았는데, 내가 작업한 내용을 더 가독성이 좋도록 보정했다.</li></ol></div><span>태그: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/tuist">Tuist</a></li><li><a href="/tags/clean-architecture">Clean Architecture</a></li><li><a href="/tags/socket">Socket</a></li><li><a href="/tags/socket-cluster">Socket Cluster</a></li><li><a href="/tags/background-queue">Background Queue</a></li><li><a href="/tags/mise">mise</a></li><li><a href="/tags/blog">Blog</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="mailto:scstnghks@gmail.com">Gmail</a> | <a href="https://www.linkedin.com/in/soohwan-kim-80250623a/">LinkedIn</a> | <a href="https://github.com/sookim-1">GitHub</a> | <a href="/feed.rss">RSS</a></p></footer></body></html>