<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta property="og:site_name" content="sookim-1"/><link rel="canonical" href="https://sookim-1.github.io/posts/020-20240617"/><meta name="twitter:url" content="https://sookim-1.github.io/posts/020-20240617"/><meta property="og:url" content="https://sookim-1.github.io/posts/020-20240617"/><title>번호 : 020, 작성일자: 2024-06-17 | sookim-1</title><meta name="twitter:title" content="번호 : 020, 작성일자: 2024-06-17 | sookim-1"/><meta property="og:title" content="번호 : 020, 작성일자: 2024-06-17 | sookim-1"/><meta name="description" content="Firebase 버전 이슈, open메서드 사용시 주의사항, ViewController 생명주기 수동 호출, HTML Entities 처리"/><meta name="twitter:description" content="Firebase 버전 이슈, open메서드 사용시 주의사항, ViewController 생명주기 수동 호출, HTML Entities 처리"/><meta property="og:description" content="Firebase 버전 이슈, open메서드 사용시 주의사항, ViewController 생명주기 수동 호출, HTML Entities 처리"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.svg" type="image/svg+xml"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to sookim-1"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">sookim-1</a></div></header><div class="wrapper"><article><div class="content"><h1>번호 : 020, 작성일자: 2024-06-17</h1><h2>2024.06.10 ~ 2024.06.16</h2><h3>⬆️ Firebase 버전 이슈</h3><hr><p>Build Configuration이 다른 환경에서만 이슈(Release 환경에서만 메인스레드 간섭이 일어나듯이 UI업데이트가 느린 이슈)가 발생하는 경우 각 Build Configuration별로 차이점을 찾아보았다. 지지난주 찾았던 차이점 중 하나는 "API 응답속도에서 차이가 있다."였고 또 발견한 다른 차이점은 로그성 라이브러리들의 차이도 있었다. 로그성 라이브러리들을 하나씩 찾아본 결과 FirebaseAnalytics의 사용여부에 따라 영향도가 있었다.</p><p>그래서 확인해본 결과 최근 FirebaseAnalytics 버전을 10.19.0에서 10.27.0으로 업그레이드를 진행했었다.</p><p>다시 10.19.0으로 다운그레이드를 하여 테스트한 결과 버전이슈로 판명하고 변경했다.</p><p>FirebaseAnalytics는 단독으로 다운그레이드가 되지않기 때문에 의존성을 갖는 제품들도 다운그레이드를 진행했다. 추가로, FireStore를 Binary로 설치시 FireStoreSwift가 같이 설치되지 않을 수 있다.</p><p>3rd-party 라이브러리의 버전변경은 항상 주의해야겠다.</p><h3>🚀 open(_:options:completionHandler:) 메서드</h3><hr><p>앱에서 링크를 간편하게 이동시키고 싶은 경우 <a href="https://developer.apple.com/documentation/uikit/uiapplication/1648685-open">open(_:options:completionHandler:)</a> 메서드를 사용할 수 있는데 외부 URL 이동할 때 앱으로 돌아온 경우 뷰의 터치이벤트를 전달받지 못할 수 있다.</p><p>뷰컨트롤러의 생명주기도 호출되지 않기 때문에 해결방법으로 completionHandler의 클로저에서 뷰커트롤러의 appearance 전환을 수동으로 처리했다.</p><pre><code class="language-swift">DispatchQueue.main.async {
    if let window = Application.window,
       let rootViewController = window.rootViewController {
        rootViewController.setNeedsLayout()
        rootViewController.layoutIfNeeded()
    }
}
</code></pre><ul><li><code>beginAppearanceTransition(_:animated:)</code>은 뷰가 화면에 나타나기 시작할 때 호출</li><li><code>endAppearanceTransition()</code>은 전환이 완료될 때 호출<ul><li>이 메서드들을 사용하면 뷰 컨트롤러의 생명 주기 이벤트 (<code>viewWillAppear</code>, <code>viewDidAppear</code>, <code>viewWillDisappear</code>, <code>viewDidDisappear</code>)가 올바르게 호출된다.</li></ul></li></ul><h3>🔠 HTML Entities</h3><hr><p>HTML 문자열을 화면에 표시하기 위해 태그처리를 진행했는데 태그 이외에도 Entities처리도 진행해야 했다.</p><p>HTML 문자열을 UILabel에 표시해야 했기 때문에 치환하는 방법을 생각했다.</p><p>HTML Entities는 특정 문자를 HTML에서 안전하게 표현하기 위한 코드나 식별자인데 모든 Entities를 치환하는 코드를 작성하려다가 <a href="https://github.com/Kitura/swift-html-entities">swift-html-entities</a> 라이브러리가 있어서 해당 라이브러리를 사용했다.</p><h3>🙋🏻‍♂️ 기타 사항</h3><hr><ol><li>AppStore Connect에서 앱을 여러 버전을 출시대기중이 가능한지 확인해보았는데 이미 제출한 버전과 심사요청할 수 있는 버전 2개 버전만 관리할 수 있다.</li></ol></div><span>태그: </span><ul class="tag-list"><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/appstore-connect">Appstore Connect</a></li><li><a href="/tags/firebase">Firebase</a></li><li><a href="/tags/html">HTML</a></li><li><a href="/tags/viewcontroller-lifecycle">ViewController LifeCycle</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="mailto:scstnghks@gmail.com">Gmail</a> | <a href="https://www.linkedin.com/in/soohwan-kim-80250623a/">LinkedIn</a> | <a href="https://github.com/sookim-1">GitHub</a> | <a href="/feed.rss">RSS</a></p></footer></body></html>