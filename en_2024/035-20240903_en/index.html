<!doctype html><html lang="en" data-bs-theme="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="🔗 pointfreeco - Tutorial"><meta name="author" content="sookim-1"><meta name="generator" content="Ignite v0.2.1"><title>Number: 035, Date: 2024-09-03 – My T.W.L Site</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/bootstrap-icons.min.css" rel="stylesheet"><link href="https://sookim-1.github.io/en_2024/035-20240903_en" rel="canonical"><link href="/images/favicon.png" rel="icon"><meta property="og:site_name" content="sookim-1"><meta property="og:title" content="Number: 035, Date: 2024-09-03"><meta property="twitter:title" content="Number: 035, Date: 2024-09-03"><meta property="og:description" content="Number: 035, Date: 2024-09-03"><meta name="twitter:description" content="Number: 035, Date: 2024-09-03"><meta property="og:url" content="https://sookim-1.github.io/en_2024/035-20240903_en"><meta name="twitter:domain" content="sookim-1.github.io"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:dnt" content="on"></head><body class="container" style="padding-top: 80px; padding-bottom: 80px"><div class="col-sm-10 mx-auto"><h1>Number: 035, Date: 2024-09-03</h1><p><h2>2024.08.27 ~ 2024.09.02</h2><h3>🏬 TCA (The Composable Architecture)</h3><hr /><ul><li>🔗 <a href="https://pointfreeco.github.io/swift-composable-architecture/main/tutorials/meetcomposablearchitecture/">pointfreeco - Tutorial</a></li></ul><p>This tutorial is provided by pointfreeco, the creators of the TCA library, and it’s great for getting started with TCA. I organized my findings while exploring how to use it.</p><p>TCA is a library that helps implement architecture, so I added it to my project. After installing the library, I noticed a significant increase in build time. Upon researching, it seems that Apple mentioned an increase in Swift Syntax compilation time, which can lead to longer build durations.</p><p>When using TCA with SwiftUI, the Store is connected to the View, and it receives Actions to modify the State.</p><p>The object that changes the State upon receiving Actions is managed by a Feature that conforms to the Reducer protocol.</p><p>From my experience learning TCA, I initially thought it might end up heavy like the Controller in MVC or ViewModel in MVVM because it primarily separates View and Feature. However, I found it natural to break down Features into smaller parts and integrate them. Swift Macros are well-implemented, which contributes to the overall neatness of the structure.</p><p>Additionally, while conducting Unit tests, it was easy to test just the Features, and tools like TestStore make writing test code very convenient.</p><h3>🎨 Design System</h3><hr /><p>I wanted to split my personal Design System into multiple Targets and host it in a private Spec repository, so I added a SwiftUI Target.</p><p>I wrote a shell script to find and update the versions in the podspec files when raising the library’s version. After the script runs, a workflow triggers to also update the tag version. However, I encountered issues on Linux, so for now, I temporarily configured the shell script to update the tag version directly.</p><h3>🚨 Issues with Tuist and Fastlane</h3><hr /><p>There was an issue where the conditional compilation didn’t correctly branch for the Build Configuration in the preprocessor directives.</p><ul><li>The problem arose because the -D flag for conditional compilation was not set properly in the xcconfig file: <code>OTHER_SWIFT_FLAGS[config=Release]=$(inherited) -D RELEASE</code>.</li><li>You can use the strings set by the -D flag in the preprocessor directives.</li></ul><p>While applying Tuist, there was an issue where after Fastlane deployment, the version update was only applied to the Xcode project, leading to version mismatches.</p><ul><li>Fastlane has a lane for updating the Xcode project version, but to also change the xcconfig, you can easily write a lane using the 🔗 <a href="https://github.com/sovcharenko/fastlane-plugin-xcconfig">fastlane-plugin-xcconfig</a> to modify the Marketing Version and Current Project Version.</li></ul><p>There was also an issue where Fastlane couldn’t retrieve the build number.</p><ul><li>If <code>$ agvtool what-version</code> fails to retrieve the version, change the Versioning System in Build Settings to AppleGeneric.</li><li>If it still doesn’t work, changing the version often triggers recognition, but if it wasn’t recognized when creating the Xcode project, set the Current Project Version to 1 during Tuist setup.</li></ul><h3>🙋🏻‍♂️ Other Notes</h3><hr /><ol><li>When using UnitTest with SwiftPM, adding the main Target automatically brings in the dependencies, eliminating the need for separate installations in the Test Target like CocoaPods.</li></ol></p><div><h3><a href="/tags/i-o-s" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">iOS</span></a><a href="/tags/swift" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">Swift</span></a><a href="/tags/swift-u-i" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">SwiftUI</span></a><a href="/tags/t-c-a" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">TCA</span></a><a href="/tags/swift-p-m" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">SwiftPM</span></a><a href="/tags/unit-test" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">UnitTest</span></a><a href="/tags/tuist" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">Tuist</span></a><a href="/tags/fastlane" rel="tag"><span class="badge text-bg-primary rounded-pill" style="margin-right: 5px">Fastlane</span></a></h3></div></div><script src="/js/bootstrap.bundle.min.js"></script></body></html>